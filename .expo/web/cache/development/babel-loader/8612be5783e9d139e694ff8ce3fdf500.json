{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { createContext, useState } from 'react';\nimport { getProduct } from \"./services/ProductsService.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var CartContext = createContext();\nexport function CartProvider(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      items = _useState2[0],\n      setItems = _useState2[1];\n\n  function addItemToCart(id) {\n    var product = getProduct(id);\n    setItems(function (prevItems) {\n      var item = prevItems.find(function (item) {\n        return item.id == id;\n      });\n\n      if (!item) {\n        return [].concat(_toConsumableArray(prevItems), [{\n          id: id,\n          qty: 1,\n          product: product,\n          totalPrice: product.price\n        }]);\n      } else {\n        return prevItems.map(function (item) {\n          if (item.id == id) {\n            item.qty++;\n            item.totalPrice += product.price;\n          }\n\n          return item;\n        });\n      }\n    });\n  }\n\n  function getItemsCount() {\n    return items.reduce(function (sum, item) {\n      return sum + item.qty;\n    }, 0);\n  }\n\n  function getTotalPrice() {\n    return items.reduce(function (sum, item) {\n      return sum + item.totalPrice;\n    }, 0);\n  }\n\n  return _jsx(CartContext.Provider, {\n    value: {\n      items: items,\n      setItems: setItems,\n      getItemsCount: getItemsCount,\n      addItemToCart: addItemToCart,\n      getTotalPrice: getTotalPrice\n    },\n    children: props.children\n  });\n}","map":{"version":3,"names":["React","createContext","useState","getProduct","CartContext","CartProvider","props","items","setItems","addItemToCart","id","product","prevItems","item","find","qty","totalPrice","price","map","getItemsCount","reduce","sum","getTotalPrice","children"],"sources":["D:/APPS/star-shop/CartContext.js"],"sourcesContent":["import React, {createContext, useState} from 'react';\r\n\r\nimport { getProduct } from './services/ProductsService.js';\r\n\r\nexport const CartContext = createContext();\r\n\r\nexport function CartProvider(props) {\r\n  const [items, setItems] = useState([]);\r\n  \r\n  function addItemToCart(id) {\r\n    const product = getProduct(id);\r\n    setItems((prevItems) => {\r\n      const item = prevItems.find((item) => (item.id == id));\r\n      if(!item) {\r\n          return [...prevItems, {\r\n              id,\r\n              qty: 1,\r\n              product,\r\n              totalPrice: product.price \r\n          }];\r\n      }\r\n      else { \r\n          return prevItems.map((item) => {\r\n            if(item.id == id) {\r\n              item.qty++;\r\n              item.totalPrice += product.price;\r\n            }\r\n            return item;\r\n          });\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  function getItemsCount() {\r\n      return items.reduce((sum, item) => (sum + item.qty), 0);\r\n  }\r\n  \r\n  function getTotalPrice() {\r\n      return items.reduce((sum, item) => (sum + item.totalPrice), 0);\r\n  }  \r\n  \r\n  return (\r\n    <CartContext.Provider \r\n      value={{items, setItems, getItemsCount, addItemToCart, getTotalPrice}}>\r\n      {props.children}\r\n    </CartContext.Provider>\r\n  );\r\n}\r\n\r\n"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,aAAf,EAA8BC,QAA9B,QAA6C,OAA7C;AAEA,SAASC,UAAT;;AAEA,OAAO,IAAMC,WAAW,GAAGH,aAAa,EAAjC;AAEP,OAAO,SAASI,YAAT,CAAsBC,KAAtB,EAA6B;EAClC,gBAA0BJ,QAAQ,CAAC,EAAD,CAAlC;EAAA;EAAA,IAAOK,KAAP;EAAA,IAAcC,QAAd;;EAEA,SAASC,aAAT,CAAuBC,EAAvB,EAA2B;IACzB,IAAMC,OAAO,GAAGR,UAAU,CAACO,EAAD,CAA1B;IACAF,QAAQ,CAAC,UAACI,SAAD,EAAe;MACtB,IAAMC,IAAI,GAAGD,SAAS,CAACE,IAAV,CAAe,UAACD,IAAD;QAAA,OAAWA,IAAI,CAACH,EAAL,IAAWA,EAAtB;MAAA,CAAf,CAAb;;MACA,IAAG,CAACG,IAAJ,EAAU;QACN,oCAAWD,SAAX,IAAsB;UAClBF,EAAE,EAAFA,EADkB;UAElBK,GAAG,EAAE,CAFa;UAGlBJ,OAAO,EAAPA,OAHkB;UAIlBK,UAAU,EAAEL,OAAO,CAACM;QAJF,CAAtB;MAMH,CAPD,MAQK;QACD,OAAOL,SAAS,CAACM,GAAV,CAAc,UAACL,IAAD,EAAU;UAC7B,IAAGA,IAAI,CAACH,EAAL,IAAWA,EAAd,EAAkB;YAChBG,IAAI,CAACE,GAAL;YACAF,IAAI,CAACG,UAAL,IAAmBL,OAAO,CAACM,KAA3B;UACD;;UACD,OAAOJ,IAAP;QACD,CANM,CAAP;MAOH;IACF,CAnBO,CAAR;EAqBD;;EAED,SAASM,aAAT,GAAyB;IACrB,OAAOZ,KAAK,CAACa,MAAN,CAAa,UAACC,GAAD,EAAMR,IAAN;MAAA,OAAgBQ,GAAG,GAAGR,IAAI,CAACE,GAA3B;IAAA,CAAb,EAA8C,CAA9C,CAAP;EACH;;EAED,SAASO,aAAT,GAAyB;IACrB,OAAOf,KAAK,CAACa,MAAN,CAAa,UAACC,GAAD,EAAMR,IAAN;MAAA,OAAgBQ,GAAG,GAAGR,IAAI,CAACG,UAA3B;IAAA,CAAb,EAAqD,CAArD,CAAP;EACH;;EAED,OACE,KAAC,WAAD,CAAa,QAAb;IACE,KAAK,EAAE;MAACT,KAAK,EAALA,KAAD;MAAQC,QAAQ,EAARA,QAAR;MAAkBW,aAAa,EAAbA,aAAlB;MAAiCV,aAAa,EAAbA,aAAjC;MAAgDa,aAAa,EAAbA;IAAhD,CADT;IAAA,UAEGhB,KAAK,CAACiB;EAFT,EADF;AAMD"},"metadata":{},"sourceType":"module"}